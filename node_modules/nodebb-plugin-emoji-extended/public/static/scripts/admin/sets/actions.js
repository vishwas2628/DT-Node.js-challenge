"use strict";define("plugin/emoji-extended/admin/sets/actions",["plugin/emoji-extended/debug","plugin/emoji-extended/admin/sets/data"],function(a,b){/*=================================================== Functions  ===================================================*/
/*----------------------------------------------- action conditions  -----------------------------------------------*/
function c(a){if(!a.prepared||a["static"])return!1;for(var c=0;c<b.active.length;c++)if(a.id===b.active[c])return!1;return!0}function d(a){return!a["static"]}function e(a){if(!a.prepared&&!a["static"])return!1;for(var c=0;c<b.active.length;c++)if(a.id===b.active[c])return!1;return!0}function f(a){for(var c=0;c<b.active.length;c++)if(a.id===b.active[c])return!0;return!1}/*----------------------------------------------------- files  -----------------------------------------------------*/
function g(b){return a.log(b.id,"  update"),m("admin.emojiExtended.updateSet",b.id).then(function(a){return i(b,a)},n)}function h(b){return b.prepared?(a.log(b.id,"  purge"),m("admin.emojiExtended.purgeSet",b.id).then(function(a){return i(b,a)},n)):void 0}function i(a,b){return a.prepared=b,a}/*-------------------------------------------------- active sets  --------------------------------------------------*/
function j(c){return c.prepared?(a.log(c.id,"  activate"),b.active.push(c.id),l().then(function(){return c})):p}function k(c){for(var d=function(){return c},e=0;e<b.active.length;e++)if(b.active[e]===c.id)return a.log(c.id,"  deactivate"),b.active.splice(e,1),l().then(d);return p}function l(){return m("admin.emojiExtended.activateSets",b.active).then(o,n)}/*------------------------------------------------- installed sets -------------------------------------------------*/
// TODO
/*----------------------------------------------------- utils  -----------------------------------------------------*/
function m(a,b){var c=$.Deferred();return socket.emit(a,b,function(a,b){null==a?c.resolve(b):c.reject(a)}),c.promise()}function n(a){// TODO alert dialog
return console.error(a),a}function o(a){return b.active=a}var p=$.Deferred().reject().promise();/*==================================================== Exports  ====================================================*/
return{purge:h,update:g,activate:j,deactivate:k,mayPurge:c,mayUpdate:d,mayActivate:e,mayDeactivate:f}});