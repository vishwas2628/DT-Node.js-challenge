"use strict";define("plugin/emoji-extended/admin/sets/options",["plugin/emoji-extended/debug","plugin/emoji-extended/admin/sets/data"],function(a,b){/*=================================================== Functions  ===================================================*/
function c(a){var b={};return b.mapping=a.find(".option-mapping").prop("checked"),b.excludes=$.map(a.find(".option-excludes").val().split(","),function(a){return a.trim()}),b}function d(a,b){a.find(".option-mapping").prop("checked",b.mapping),a.find(".option-excludes").val(b.excludes.join(", "))}function e(b,c){return a.log(c.id,"  reset options"),d(b,c.options),j}function f(b,d){return a.log(d.id,"  save options"),h("admin.settings.updateEmojiExtendedSet",{id:d.id,options:c(b)}).then(function(a){d.options=a},i)}function g(c,e){return a.log(e.id,"  purge options"),d(c,b.defaultOptions),h("admin.settings.updateEmojiExtendedSet",{id:e.id,options:b.defaultOptions}).then(function(a){e.options=a},i)}/*----------------------------------------------------- utils  -----------------------------------------------------*/
function h(a,b){var c=$.Deferred();return socket.emit(a,b,function(a,b){null==a?c.resolve(b):c.reject(a)}),c.promise()}function i(a){// TODO alert dialog
return console.error(a),a}var j=$.Deferred().resolve().promise();/*==================================================== Exports  ====================================================*/
return{save:f,reset:e,purge:g}});